<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC
	"-//W3C//DTD XHTML 1.1//EN"
	"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<script type="text/javascript">
window.onload=function() {
	var obj_body=document.body;
	for (var i=1; i <= 4; i++) {
		var obj_alert=document.createElement('a');
		//The line below wont work
		//obj_alert.onclick=function() { function() { alert(i); } }
		//The line below will work, because the closecallback function creates a
		// closure which the callback function grabs the variables from
		obj_alert.onclick=closurecallback(reallyclickit,i);
		obj_alert.appendChild(document.createTextNode('Alert '+i));
		obj_body.appendChild(obj_alert);
		obj_body.appendChild(document.createElement('br'));
	}
}

function closurecallback(func,boo) {
	return function() {
		func(boo);
	}
}

function reallyclickit(apa) {
	alert(apa);
}

</script>
</head>
<body>
	<a onclick="reallyclickit(500);">click this</a><br />
</body>
</html>
